<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<!-- Mirrored from coderthemes.com/velonic_3.0/admin_3/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 29 May 2016 14:52:04 GMT -->
<head th:include="common/static :: staticlink('人工幼林生长环境监测系统')">
<meta charset="utf-8"/>

</head>


<body>
	<!-- Aside Start-->
	<aside class="left-panel collapsed"
		th:include="common/navbar :: user_nav"></aside>
	<!-- Aside Ends-->

	<!--Main Content Start -->
	<section class="content">

		<!-- Header -->
		<div th:include="common/header :: user_header"></div>
		<!-- Header Ends -->


		<!-- Page Content Start -->
		<!-- ================== -->

		<div class="wraper container-fluid">
			<div class="row">
				<div class="col-sm-12">
					<div class="bg-picture"
						style="background-image: url('/img/bg_6.jpg')">
						<span class="bg-picture-overlay"></span>
						<!-- overlay -->
						<!-- meta -->
						<div class="box-layout meta bottom">
							<div class="col-sm-6 clearfix">
								<label class="img-wrapper pull-left m-r-15" for="file"><input
									type="file" id="file" name="" style="display: none" /> <img
									th:src="${user.uImagepath}" src="/img/avatar-2.jpg"
									alt="点击修改头像" style="width: 64px" class="br-radius"
									id="uImagepath" name="uImagepath"/></label>
								<div class="media-body">
									<h3 class="text-white mb-2 m-t-10 ellipsis"
										th:text="${user.uFullname}">Jonathan Deo</h3>
									<h5 class="text-white" th:text="${user.uEmail}">Mycityname</h5>
								</div>
							</div>

							<div class="col-sm-6">

								<div class="pull-right">
									<div class="dropdown">
										<a data-toggle="dropdown"
											class="dropdown-toggle btn btn-primary" href="#">
											Following <span class="caret"></span>
										</a>
										<ul class="dropdown-menu dropdown-menu-right" role="menu">
											<li><a href="#">Poke</a></li>
											<li><a href="#">Private message</a></li>
											<li class="divider"></li>
											<li><a href="#">Unfollow</a></li>
										</ul>
									</div>
								</div>
							</div>
						</div>
						<!--/ meta -->
					</div>
				</div>
			</div>

			<div class="row m-t-30">
				<div class="col-sm-12">
					<div class="panel panel-default p-0">
						<div class="panel-body p-0">
							<ul class="nav nav-tabs profile-tabs">
								<li class=""><a data-toggle="tab" href="#aboutme">About
										Me</a></li>
								<li class=""><a data-toggle="tab" href="#user-activities">Activities</a></li>
								<li class="active"><a data-toggle="tab" href="#edit-profile">Settings</a></li>
								<li class=""><a data-toggle="tab" href="#projects">Projects</a></li>
							</ul>

							<div class="tab-content m-0">

								<div id="aboutme" class="tab-pane ">
									<div class="profile-desk">
										<h1 th:text="${user.uFullname}">Johnathan Deo</h1>
										<span class="designation">PRODUCT DESIGNER (UX / UI /
											Visual Interaction)</span>
										<p th:text="${user.uAboutme}">I have 10 years of
											experience designing for the web, and specialize in the areas
											of user interface design, interaction design, visual design
											and prototyping.</p>
										<a class="btn btn-primary m-t-20" href="#"> <i
											class="fa fa-check"></i> Following
										</a>

										<table class="table table-condensed">
											<thead>
												<tr>
													<th colspan="3"><h3>Contact Information</h3></th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td><b>Url</b></td>
													<td><a href="#" class="ng-binding">
															www.example.com </a></td>
												</tr>
												<tr>
													<td><b>Email</b></td>
													<td><a href="#" class="ng-binding"
														th:text="${user.uEmail}"> jonathandeo@example.com </a></td>
												</tr>
												<tr>
													<td><b>Phone</b></td>
													<td class="ng-binding" th:text="${user.uTelephone}">(123)-456-7890</td>
												</tr>

											</tbody>
										</table>
									</div>
									<!-- end profile-desk -->
								</div>
								<!-- about-me -->


								<!-- Activities -->
								<div id="user-activities" class="tab-pane">
									<div class="timeline-2">
										<div class="time-item" th:each="log,userStat : ${loglist}">
											<div class="item-info">
												<div class="text-muted"
													th:text="${#dates.format(log.lTime,'yyyy-MM-dd HH:mm:ss')}">30
													minutes ago</div>
												<p th:text="${log.lSubject}">
													<a href="#" class="text-info">Lorem</a> commented your
													post.
												</p>
												<p th:if="${log.lContent} != null">
													<em th:text="${log.lContent}">"Lorem ipsum dolor sit
														amet, consectetur adipiscing elit. Aliquam laoreet tellus
														ut tincidunt euismod. "</em>
												</p>
											</div>
										</div>

									</div>
								</div>

								<!-- settings -->
								<div id="edit-profile" class="tab-pane active">
									<div class="user-profile-content">
										<form role="form" class="" action="/update/user" method="post">
											<div class="form-group">
												<label for="FullName">Full Name</label> <input type="text"
													th:field="${user.uFullname}" class="form-control">
											</div>
											<div class="form-group">
												<label for="Email">Email</label> <input type="email"
													th:field="${user.uEmail}" id="Email" class="form-control">
											</div>
											<div class="form-group">
												<label for="Password">Password</label> <input
													type="password" placeholder="6 - 15 Characters"
													id="Password" name="uPassword" class="form-control">
											</div>
											<div class="form-group">
												<label for="RePassword">Re-Password</label> <input
													type="password" placeholder="6 - 15 Characters"
													id="RePassword" class="form-control">
											</div>
											<div class="form-group">
												<label for="RePassword">Realmname</label> <select
													class="form-control" th:field="${user.uRealmname}">
													<option
														th:selected="(${user.uRealmname} == ${user.uFullname})"
														th:text="${user.uFullname}" th:value="${user.uFullname}">1</option>
													<option
														th:selected="(${user.uRealmname} == ${user.uTelephone})"
														th:text="${user.uTelephone}" th:value="${user.uTelephone}">2</option>
													<option
														th:selected="(${user.uRealmname} == ${user.uEmail})"
														th:text="${user.uEmail}" th:value="${user.uEmail}">3</option>
												</select>
											</div>
											<div class="form-group">
												<label for="RePassword">Receive Email Notifications</label>
												<select class="form-control" th:field="${user.uBeemail}">
													<option th:selected="(${user.uBeemail} == 1)" value="1">Yes</option>
													<option th:selected="(${user.uBeemail} == 0)" value="0">Not</option>
												</select>
											</div>


											<div class="form-group">
												<label for="AboutMe">About Me</label>
												<textarea style="height: 125px;" id="AboutMe"
													class="form-control" th:field="${user.uAboutme}">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.</textarea>
											</div>

											<button class="btn btn-primary" type="submit">Save</button>
										</form>
									</div>
								</div>


								<!-- profile -->
								<div id="projects" class="tab-pane">
									<div class="row m-t-10">
										<div class="col-md-12">
											<div class="portlet">
												<!-- /primary heading -->
												<div id="portlet2" class="panel-collapse collapse in">
													<div class="portlet-body">
														<div class="table-responsive">
															<table class="table">
																<thead>
																	<tr>
																		<th width="5%">#</th>
																		<th width="10%">设备名</th>
																		<th width="40%">备注</th>
																		<th width="15%">工作状态</th>
																		<th width="20%">开始工作时间</th>
																		<th width="10%">电源状态</th>
																	</tr>
																</thead>
																<tbody>
																	<!-- th:each="pi,userStat : ${pilist}" -->
																	<tr th:each="pi,i : ${pilist}">
																		<td th:text="${i.index}">1</td>
																		<td><a href="#"><p th:text="${pi.pName}">设备1</p></a></td>
																		<td th:text="${pi.pRemark}">备注1</td>
																		<td>
																			<form class="form-horizontal" role="form">
																				<div class="col-sm-6">
																					<div class="form-group">
																						<div class="col-sm-6 control-label"
																							th:switch="${pi.pSwitchstate}">
																							<div th:case="0" class="toggle0 toggle-success"
																								th:pId="${pi.pId}"></div>
																							<div th:case="1" class="toggle1 toggle-success"
																								th:pId="${pi.pId}"></div>
																						</div>
																					</div>
																				</div>
																			</form>


																		</td>

																		<td><p
																				th:text="${#dates.format(pi.pStarttime,'yyyy-MM-dd HH:mm:ss')}">2018-7-29
																				17:17:00</p></td>
																		<td><th:switch th:switch="${pi.pBootstate}">
																				<span th:case="1" class="label label-success">待机</span>
																				<span th:case="0" class="label label-pink">关机</span>
																			</th:switch></td>
																	</tr>
																</tbody>
															</table>
														</div>
													</div>
												</div>
											</div>
											<!-- /Portlet -->
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>






		</div>

		<!-- Page Content Ends -->
		<!-- ================== -->

		<!-- Footer Start -->
		<div th:include="common/footer :: user_footer"></div>
		<!-- Footer Ends -->



	</section>
	<!-- Main Content Ends -->
	<script th:src="@{/assets/toggles/toggles.min.js}"
		type="text/javascript"></script>
	<script type="text/javascript">
		/* ==============================================
		     Counter Up
		     =============================================== */
		jQuery(document).ready(function($) {
			$('.counter').counterUp({
				delay : 100,
				time : 1200
			});
		});
	</script>

	<script>
		document.getElementById('file').onchange = function() {
			var imgFile = this.files[0];

			var formData = new FormData();
			formData.append('file', imgFile);
			$.ajax({
				url : "/update/user/image",
				type : "post",
				data : formData,
				contentType : false,
				processData : false,
				dataType : "json",
				mimeType : "multipart/form-data",
				success : function(result) {
					if (result.status == 200) {
						//$("#uImagepath").prop('src', result.data);
						location.href = "/";
					} else {
						alert(result.msg);
					}
				}
			});

		};
		jQuery('.toggle0').toggles({
			on : false
		});
		jQuery('.toggle1').toggles({
			on : true
		});
		$('.toggle1').on('toggle', function(e, active) {
			var val = this.getAttribute('pId');
			if (active) {
				change(val,1);
			} else {
				change(val,0);
			}
		});
		$('.toggle0').on('toggle', function(e, active) {
			var val = this.getAttribute('pId');
			if (active) {
				change(val,1);
			} else {
				change(val,0);
			}
		});
		function change(pId,pSwitch){
			$.ajax({
	            url : "/api/pi/changeSwitchState",
	            type : "POST",
	            dataType:"json",
	            contentType : "application/json",
	            <!-- 向后端传输的数据 -->
	            data : JSON.stringify({
	            	"pId" : pId,
	            	"pSwitchstate":pSwitch
	            }),
	            success:function(result) {
	            	//alert(result.msg);
	            	 swal("Good job!", "", "success");

	            }
	        });
		}
	</script>
</body>

<!-- Mirrored from coderthemes.com/velonic_3.0/admin_3/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 29 May 2016 14:52:31 GMT -->
</html>
